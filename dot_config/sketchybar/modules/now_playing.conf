# Artwork (auto-updates)
sketchybar --add item now_playing.art right \
  --set now_playing.art \
    width=28 padding_left=10 padding_right=6 \
    background.drawing=off \
    image.drawing=on image=media.artwork image.corner_radius=6 image.scale=1.0 \
    script="$PLUGIN_DIR/now_playing.sh" \
  --subscribe now_playing.art media_change

# Scrolling title • artist
sketchybar --add item now_playing.label right \
  --set now_playing.label \
    script="$PLUGIN_DIR/now_playing.sh" \
    update_freq=2 \
    icon.drawing=off background.drawing=off \
    label.font="JetBrainsMono Nerd Font:Regular:12.0" \
    label.max_chars=28 scroll_texts=on scroll_duration=120 \
    width=260 label.padding_left=0 label.padding_right=0 \
  --subscribe now_playing.label media_change mouse.entered mouse.exited

# Tiny visualizer (width bound to system output volume)
sketchybar --add item now_playing.viz right \
  --set now_playing.viz \
    script="$PLUGIN_DIR/now_playing.sh" \
    update_freq=2 icon= label= \
    background.drawing=on background.color=0xff414559 \
    background.corner_radius=15 background.height=6 \
    width=60 padding_left=8 padding_right=8 \
  --subscribe now_playing.viz mouse.entered mouse.exited

# Popup anchored to the LABEL (not a bracket!)
sketchybar --add item now_playing.popup popup.now_playing.label \
  --set now_playing.popup \
    drawing=on \
    background.drawing=on background.color=0xff414559 \
    background.corner_radius=15 background.height=100 \
    label="…" label.font="JetBrainsMono Nerd Font:Regular:12.0" label.color=0xffc6d0f5 \
    padding_left=20 padding_right=20

# Cosmetic capsule around the 3 items
sketchybar --add bracket now_playing.bracket now_playing.art now_playing.label now_playing.viz \
  --set now_playing.bracket \
    background.color=0xff414559 \
    background.corner_radius=15 \
    background.height=30